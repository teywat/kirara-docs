### 3.2版本之后

工作流生命周期：
> 新版本中每个规则触发时都将创建一个新的 `workflow`实例。
>
> 不同的workflow对象实例将在不同线程中执行。

block块生命周期：

>在工作流中，每个block块都将在即将被执行时实例化，执行后交由gc销毁。
>
>> [!NOTE]
>>
>> 在此版本更新后`block`块不建议放置持久化内容或者全局对象。替代方案参考[作用域容器](../container.md)。

---

### 3.1版本及以前

工作流生命周期:

>工作流对象实例全局唯一，当规则触发时都运行的同一个实例。
>
>不同工作流实例将在不同线程中被执行。
>
>现已查明bug:
>
>- `im`多个规则同时触发时，如果规则在不同的聊天群被触发。由于使用的同一个`workflow`实例会出现: 本应该发送到不同群的信息被发送到同一个群

block块生命周期:

>在`kirara_ai`程序开始时，`block`随`workflow`初始化而初始化，其生命周期将贯彻程序整个生命周期。
>
>当`workflow`中有多个相同的块对象时，`kirara_ai`将会为分别实例化为不同对象实例。
>
>> [!WARNING]
>>
>> 请注意block块内的对象生命周期，避免大对象长时间存在或不进行垃圾回收，导致内存泄露或者计算机资源被长时间占用